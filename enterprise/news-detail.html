<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="font/iconfont.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/news-detail.css">
    <title>企业站</title>
    <script src="./js/jquery.min.js"></script>

    <script src="./js/bootstrap.min.js"></script>
    <script src="js/axios.min.js"></script>

    <!--<script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>-->
</head>
<body>
<body>
<!--头部-->
<nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #e3f2fd;">
    <a class="navbar-brand" href="#">我还没有logo</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
        <li class="nav-item active">
          <a class="nav-link" href="index.html">首页</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="news.html">美食学堂</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="about.html">关于我们</a>
          </li>
      </ul>
    </div>
  </nav>

<!--食物详情介绍-->
<div class="container">
    <div class="row ">
        <divc class="col text-center">
            <h2 class="h2" id="title"></h2>
            <div class="des-date" id="update"></div>
            <div><img src="" alt="" id="foodimg"></div>
            <!--<div class="food-img"></div>-->
            <p id="dest" class="lead text-left "></p>
        </div>
    </div>
    <div class="row">
        <ul class="col qlink">
            <li>上一篇：<a href="" id="pre"></a></li>
            <li>下一篇：<a href="" id="next"></a></li>
        </ul>
    </div>
</div>


<!--返回顶部-->
<div class="back-to" id="toolBackTop">
    <a title="返回顶部"  href="#top" class="back-top"></a>
</div>


</body>

<script src="js/index.js"></script>
<script>

    $(function () {
        $('#wx').hover(function () {
            $('#scanImg').show()
        },function () {
            $('#scanImg').hide()
        });
        $('.back-top').onclick = function () {
            window.scrollTo(0,0);
            return false;
        }
        var bt = $('#toolBackTop');
        var sw = $(document.body)[0].clientWidth;
        var limitsw = (sw - 840) / 2 - 80;  //距离右侧距离
        if (limitsw > 0){
            limitsw = parseInt(limitsw);
            bt.css("right",limitsw/8);
        }

        $(window).scroll(function() {
            var st = $(window).scrollTop();
            if(st > 300){
                bt.show();
            }else{
                bt.hide();
            }
        });

    //des
        console.log(location.search.split('='));
        console.log(location.search.split('&'));
        //
        // var page = parseInt(location.search.split('&'))[0].split('=')[1];
        // var id=parseInt(location.search.split('&'))[1].split('=')[1];

        // var page = (location.search.split('&'))[0].split('=')[1];
        var id =parseInt((location.search.split('='))[1]);
        // console.log(page)
        console.log(id);
        axios.get('https://mock-api.com/Gzq27OgW.mock/list')
            .then(function(res){
                console.log(res.data)
                var a=res.data[id];
                // console.log(res.data.length-1)
                $('#title').html(a.title);
                $('#update').html("发布时间："+a.date);
                $('#foodimg').prop('src', a.img);
                $('#dest').html(a.description);
                if(id==0){
                    $('#pre').html("无");
                    $('#pre').attr('disabled',true).css("pointer-events","none");  ;
                    $('#next').html(res.data[1].title);
                    $('#next').attr('href', 'news-detail.html?id=1');
                };
                if(id==res.data.length-1){
                    var nowId = id-1;
                    $('#pre').html(res.data[nowId].title);
                    $('#pre').attr('href', 'news-detail.html?id='+nowId);
                    $('#next').html("无");
                    $('#next').attr('disabled',true).css("pointer-events","none");
                };
                if(id>0 && id<res.data.length-1){
                    var preId = id-1;
                    var nextId = id+1;
                    console.log(nextId)
                    $('#pre').html(res.data[preId].title);
                    $('#next').html(res.data[nextId].title);
                    $('#next').attr('href', 'news-detail.html?id='+nextId);
                    $('#pre').attr('href', 'news-detail.html?id='+preId);
                }

            }).catch(function(res){
            console.log('error',res);

        })
    })

</script>
</body>
</html>
